name: Deploy PHP Application
 on:
 push:
 branches: - develop    - master     
# Deploy a desarrollo
 # Deploy a producciÃ³n (futuro)
 # Permitir ejecuciÃ³n manual
 workflow_dispatch:
 inputs:
 environment:
 description: 'Environment to deploy'
 required: true
 default: 'development'
 type: choice
 options:- development- production
 jobs:
 deploy:
 runs-on: ubuntu-latest
 steps:- name: 
ï¿½
ï¿½
 Checkout code
 uses: actions/checkout@v4- name: 
ï¿½
ï¿½
 Setup PHP
 uses: shivammathur/setup-php@v2
 with:
 php-version: '8.1'- name: 
ï¿½
ï¿½
 Determine environment
 id: env
 run: |
        if [[ "${{ github.ref }}" == "refs/heads/master" ]] || [[ "${{ github.event.inputs.environment }}" == "production" ]
          echo "environment=production" >> $GITHUB_OUTPUT
          echo "
 ðŸ­
 Deploying to PRODUCTION"
        else
          echo "environment=development" >> $GITHUB_OUTPUT
          echo "
 ðŸ”§
 Deploying to DEVELOPMENT"
        fi- name: 
ï¿½
ï¿½
 Generate config.php
run: |
        if [[ "${{ steps.env.outputs.environment }}" == "production" ]]; then
          # ConfiguraciÃ³n de producciÃ³n
          cat > auditoria/config.php << 'EOF'
        <?php
        // CONFIGURACIÃ“N DE PRODUCCIÃ“N
        $HOSTNAME = "${{ secrets.PROD_DB_HOST }}" ;
        $USERNAME = "${{ secrets.PROD_DB_USER }}" ;
        $PASSWORD = "${{ secrets.PROD_DB_PASS }}" ;
        $DATABASE = "${{ secrets.PROD_DB_NAME }}" ;
        $CFG_SUBCARPETA = "images" ;
        ?>
        EOF
        else
          # ConfiguraciÃ³n de desarrollo
          cat > auditoria/config.php << 'EOF'
        <?php
        // CONFIGURACIÃ“N DE DESARROLLO
        $HOSTNAME = "${{ secrets.DEV_DB_HOST }}" ;
        $USERNAME = "${{ secrets.DEV_DB_USER }}" ;
        $PASSWORD = "${{ secrets.DEV_DB_PASS }}" ;
        $DATABASE = "${{ secrets.DEV_DB_NAME }}" ;
        $CFG_SUBCARPETA = "images" ;
        ?>
        EOF
        fi- name: 
ï¿½
ï¿½
 Validate PHP syntax
 run: |
        find . -name "*.php" -exec php -l {} \; > /dev/null
        echo "
 âœ…
 PHP syntax validation passed"- name: 
ï¿½
ï¿½
 Deploy to Development Server
 if: steps.env.outputs.environment == 'development'
 uses: SamKirkland/FTP-Deploy-Action@v4.3.4
 with:
 server: ${{ secrets.DEV_FTP_HOST }}
 username: ${{ secrets.DEV_FTP_USER }}
 password: ${{ secrets.DEV_FTP_PASS }}
 local-dir: ./
 server-dir: ${{ secrets.DEV_FTP_PATH }}
 exclude: |
          **/.git*
          **/.git*/**
          **/node_modules/**
          **/.env*
          **/tests/**
2. ConfiguraciÃ³n de Secrets en GitHub
 Ve a tu repositorio â†’ Settings â†’ Secrets and variables â†’ Actions
 Secrets para Desarrollo:
          **/.github/**
          **/README.md
          
    - name: 
ï¿½
ï¿½
 Deploy to Production Server
      if: steps.env.outputs.environment == 'production'
      uses: SamKirkland/FTP-Deploy-Action@v4.3.4
      with:
        server: ${{ secrets.PROD_FTP_HOST }}
        username: ${{ secrets.PROD_FTP_USER }}
        password: ${{ secrets.PROD_FTP_PASS }}
        local-dir: ./
        server-dir: ${{ secrets.PROD_FTP_PATH }}
        exclude: |
          **/.git*
          **/.git*/**
          **/node_modules/**
          **/.env*
          **/tests/**
          **/.github/**
          **/README.md
          
    - name: 
âœ…
 Deployment Summary
      run: |
        echo "
 ðŸŽ‰
 Deployment completed successfully!"
        echo "Environment: ${{ steps.env.outputs.environment }}"
        echo "Branch: ${{ github.ref_name }}"
        echo "Commit: ${{ github.sha }}"
